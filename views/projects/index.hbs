<div class="min-h-screen bg-gray-50">
    <!-- Header -->
    <div class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4">
                <div>
                    <h1 class="text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900">{{eventSettings.event_name}} Projects</h1>
                    <p class="text-sm sm:text-base text-gray-600 mt-1">Explore all the amazing projects from this event</p>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6 lg:py-8">
        <!-- Division Filter -->
        {{#if divisions.length}}
        <div class="bg-white rounded-xl shadow-sm p-4 sm:p-6 mb-4 sm:mb-6">
            <form action="/projects" method="GET" class="flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-3">
                <label for="division" class="text-sm font-semibold text-gray-700 whitespace-nowrap pt-1.5 sm:pt-0">Filter by Division:</label>
                <select id="division" name="division" onchange="this.form.submit()"
                    class="flex-1 w-full sm:w-auto px-4 py-2.5 text-base border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition min-h-[44px]">
                    <option value="">All Divisions</option>
                    {{#each divisions}}
                    <option value="{{this}}" {{#if (eq this ../selectedDivision)}}selected{{/if}}>{{this}}</option>
                    {{/each}}
                </select>
            </form>
        </div>
        {{/if}}

        {{#if teams.length}}
        {{#if selectedDivision}}
        <div class="mb-4 sm:mb-6">
            <p class="text-sm text-gray-600">
                Showing projects in <span class="font-semibold text-gray-900">{{selectedDivision}}</span> division
                <a href="/projects" class="text-blue-600 hover:text-blue-800 underline ml-2">Clear filter</a>
            </p>
        </div>
        {{/if}}
        <!-- Projects Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
            {{#each teams}}
            <a href="/projects/{{this.id}}" class="block bg-white rounded-xl shadow-lg hover:shadow-xl transition overflow-hidden group">
                <!-- Screenshot Preview -->
                {{#if this.screenshots.length}}
                <div class="relative h-48 bg-gray-200 overflow-hidden">
                    <img src="/uploads/screenshots/{{this.screenshots.0.filename}}" 
                         alt="{{this.project_name}}"
                         class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
                    {{#if (gt this.screenshots.length 1)}}
                    <div class="absolute top-2 right-2 bg-black/70 text-white px-2 py-1 rounded text-xs font-semibold">
                        +{{subtract this.screenshots.length 1}} more
                    </div>
                    {{/if}}
                </div>
                {{else}}
                <div class="h-48 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center">
                    <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                </div>
                {{/if}}

                <!-- Project Info -->
                <div class="p-6">
                    <div class="flex items-start justify-between mb-2 gap-2">
                        <h3 class="text-lg sm:text-xl font-bold text-gray-900 group-hover:text-blue-600 transition flex-1 min-w-0">
                            {{this.project_name}}
                        </h3>
                        {{#if this.division}}
                        <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs font-semibold rounded whitespace-nowrap flex-shrink-0">
                            {{this.division}}
                        </span>
                        {{/if}}
                    </div>
                    <p class="text-sm text-gray-600 mb-3">by <span class="font-semibold text-gray-900">{{this.name}}</span></p>
                    
                    {{#if this.team_members.length}}
                    <div class="mb-3 pb-3 border-b border-gray-100">
                        <p class="text-xs text-gray-500 mb-1.5 font-semibold uppercase tracking-wide">Team Members</p>
                        <p class="text-sm text-gray-700 leading-relaxed">{{#each this.team_members}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}</p>
                    </div>
                    {{/if}}

                    <div class="flex items-center gap-3 text-xs sm:text-sm text-gray-600">
                        {{#if this.website_link}}
                        <span class="flex items-center gap-1.5">
                            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path>
                            </svg>
                            <span class="font-medium">Website</span>
                        </span>
                        {{/if}}
                        {{#if this.github_link}}
                        <span class="flex items-center gap-1.5">
                            <svg class="w-4 h-4 text-gray-900" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                            </svg>
                            <span class="font-medium">GitHub</span>
                        </span>
                        {{/if}}
                    </div>
                </div>
            </a>
            {{/each}}
        </div>
        {{else}}
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4">
                <h2 class="text-lg sm:text-xl font-bold text-white">
                    {{#if selectedDivision}}
                    No Projects in {{selectedDivision}}
                    {{else}}
                    No Projects Yet
                    {{/if}}
                </h2>
            </div>
            <div class="p-8 text-center">
                <svg class="w-16 h-16 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
                {{#if selectedDivision}}
                <p class="text-gray-600 text-base sm:text-lg">No projects found in the <span class="font-semibold">{{selectedDivision}}</span> division.</p>
                <p class="text-gray-500 text-sm mt-2">
                    <a href="/projects" class="text-blue-600 hover:text-blue-800 underline">View all projects</a> or try a different division.
                </p>
                {{else}}
                <p class="text-gray-600 text-base sm:text-lg">No projects have been registered yet.</p>
                <p class="text-gray-500 text-sm mt-2">Check back soon to see amazing projects from this event!</p>
                {{/if}}
            </div>
        </div>
        {{/if}}
    </div>
</div>
