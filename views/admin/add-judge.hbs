<div class="min-h-screen bg-white">
    <!-- Header -->
    <div class="bg-white border-b border-gray-200 sticky top-0 z-10 backdrop-blur-sm bg-white/95">
        <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 tracking-tight">Add User</h1>
                    <p class="text-sm text-gray-500 mt-2">Create a new user account</p>
                </div>
                <a href="/admin" class="px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 transition">
                    ← Back
                </a>
            </div>
        </div>
    </div>

    <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Error Messages -->
        {{#if error}}
        <div class="mb-8 bg-red-50 border border-red-200 rounded-lg p-4">
            <p class="text-red-800 font-medium">{{error}}</p>
        </div>
        {{/if}}
        
        {{#if success}}
        <div class="mb-8 bg-green-50 border border-green-200 rounded-lg p-4">
            <p class="text-green-800 font-medium">✓ {{success}}</p>
        </div>
        {{/if}}

        <!-- Info Card -->
        <div class="mb-8 bg-blue-50 border border-blue-200 rounded-lg p-4">
            <p class="text-sm text-blue-800">
                Add a new user (judge, participant, or admin). They will be able to log in using their email address.
            </p>
        </div>

        <!-- Form Card -->
        <div class="border border-gray-200 rounded-lg p-8">
            <form method="POST" action="/admin/judges/add" class="space-y-6">
                <!-- Email -->
                <div>
                    <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                        Email Address <span class="text-red-500">*</span>
                    </label>
                    <input type="email" 
                           id="email" 
                           name="email" 
                           required 
                           autofocus
                           placeholder="user@example.com"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent transition">
                </div>

                <!-- Name -->
                <div>
                    <label for="name" class="block text-sm font-semibold text-gray-700 mb-2">
                        Name <span class="text-gray-500 font-normal">(optional)</span>
                    </label>
                    <input type="text" 
                           id="name" 
                           name="name" 
                           placeholder="Full Name"
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent transition">
                </div>

                <!-- Role -->
                <div>
                    <label for="role" class="block text-sm font-semibold text-gray-700 mb-2">
                        Role <span class="text-red-500">*</span>
                    </label>
                    <select id="role" 
                            name="role" 
                            required
                            onchange="toggleTeamSelect()"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent transition">
                        <option value="judge">Judge - Can score teams</option>
                        <option value="participant">Participant - Can view/edit their team</option>
                        <option value="admin">Admin - Full access</option>
                    </select>
                    <div class="mt-3 p-4 bg-gray-50 rounded-lg text-sm text-gray-600 space-y-2">
                        <div><span class="font-semibold text-gray-900">Judge:</span> Can score teams during judging rounds</div>
                        <div><span class="font-semibold text-gray-900">Participant:</span> Can view/edit their team and see live scores</div>
                        <div><span class="font-semibold text-gray-900">Admin:</span> Can manage teams, users, and access all features</div>
                    </div>
                </div>

                <!-- Team Select (for participants) -->
                <div id="team-select-container" class="hidden">
                    <label for="teamId" class="block text-sm font-semibold text-gray-700 mb-2">
                        Link to Team <span class="text-gray-500 font-normal">(optional)</span>
                    </label>
                    <select id="teamId" 
                            name="teamId" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent transition">
                        <option value="">No team (can be linked later)</option>
                        {{#each teams}}
                        <option value="{{this.id}}">{{this.name}} ({{this.table_name}})</option>
                        {{/each}}
                    </select>
                    <p class="text-sm text-gray-600 mt-2">
                        Link this participant to a team to give them access to their team dashboard
                    </p>
                </div>

                <script>
                    function toggleTeamSelect() {
                        const roleSelect = document.getElementById('role');
                        const teamContainer = document.getElementById('team-select-container');
                        if (roleSelect.value === 'participant') {
                            teamContainer.classList.remove('hidden');
                        } else {
                            teamContainer.classList.add('hidden');
                        }
                    }
                </script>
                
                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-3 pt-4">
                    <button type="submit" 
                            class="flex-1 px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-lg font-semibold transition">
                        Add User
                    </button>
                    <a href="/admin" 
                       class="flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-800 text-center rounded-lg font-semibold transition">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
